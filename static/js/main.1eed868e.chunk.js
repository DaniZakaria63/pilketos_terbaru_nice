(this.webpackJsonphashira=this.webpackJsonphashira||[]).push([[0],{60:function(e,a,t){e.exports=t(91)},90:function(e,a,t){},91:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),i=t(22),s=t.n(i),o=t(6),r=t(7),c=t(5),u=t(10),h=t(9),m=t(24),d=t(8),p=t(29),g=t(23),b=t.n(g),v=t(30),f=t(96),k=t(94),E=t(93),O=t(51).create({baseURL:"https://piketosservernodejs.herokuapp.com/api/"}),j=(t(58),l.a.createContext(),function(e){Object(u.a)(t,e);var a=Object(h.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).state={siswa:[],kelas:[],kelasClicked:"",siswaClicked:"",nis:"",isKelasClicked:!1},n.handleChange=n.handleChange.bind(Object(c.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(c.a)(n)),n.componentDidMount=n.componentDidMount.bind(Object(c.a)(n)),n.handleKelasClicked=n.handleKelasClicked.bind(Object(c.a)(n)),n}return Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=Object(v.a)(b.a.mark((function e(){var a=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O.get("/kelas").then((function(e){a.setState({kelas:e.data.Kelas})})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"handleKelasClicked",value:function(e){var a=this;this.setState({kelasClicked:e.target.value}),console.log(e.target.value),O.get("/siswa/kelas/"+e.target.value).then((function(e){a.setState({siswa:e.data.siswa,isKelasClicked:!0})})).catch((function(e){console.log(e)}))}},{key:"handleChange",value:function(e){e.preventDefault();var a=e.target,t=a.name,n=a.value;this.setState(Object(p.a)({},t,n))}},{key:"handleSubmit",value:function(e){var a=this;e.preventDefault(),O.post("/pelaksanaan/login",{nama:e.target.nama.value,nis:e.target.nis.value}).then((function(e){null!=e.data.siswa&&a.props.handleResponseLogin(e.data)})).catch((function(e){console.log(e)})),this.setState({kelasClicked:"",siswaClicked:""})}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(f.a,{className:"col-8 col-sm-6 col-xl-4 mx-auto login-card"},l.a.createElement(f.a.Body,null,l.a.createElement(f.a.Title,null,"PILKETOS ",(new Date).getFullYear()),l.a.createElement(k.a,{onSubmit:this.handleSubmit,className:" login-dialog"},l.a.createElement(k.a.Group,{controlId:"kelas"},l.a.createElement(k.a.Label,null,"Kelas"),l.a.createElement(k.a.Control,{required:!0,as:"select",value:this.state.kelasClicked,onChange:this.handleKelasClicked,onClick:this.handleKelasClicked},this.state.kelas.map((function(e){return l.a.createElement("option",{key:e._id},e.nama)})))),this.state.isKelasClicked?l.a.createElement(k.a.Group,{controlId:"nama"},l.a.createElement(k.a.Label,null,"Nama Lengkap"),l.a.createElement(k.a.Control,{as:"select",required:!0,name:"siswaClicked",value:this.state.siswaClicked,onChange:this.handleChange},this.state.siswa.map((function(e){return l.a.createElement("option",{key:e._id},e.nama)})))):null,l.a.createElement(k.a.Group,{controlId:"nis"},l.a.createElement(k.a.Label,null,"Nomor NIS"),l.a.createElement(k.a.Control,{name:"nis",type:"number",placeholder:"NIS",value:this.state.nis,onChange:this.handleChange})),l.a.createElement(E.a,{variant:"primary",type:"submit"},"Submit")))))}}]),t}(l.a.Component)),y=new(function(){function e(){Object(o.a)(this,e),this.auth=!1}return Object(r.a)(e,[{key:"login",value:function(e){this.auth=!0,e()}},{key:"logout",value:function(e){this.auth=!1,e()}},{key:"isAuth",value:function(){return this.auth}}]),e}()),S=function(e){Object(u.a)(t,e);var a=Object(h.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).handleResponseLogin=n.handleResponseLogin.bind(Object(c.a)(n)),n}return Object(r.a)(t,[{key:"handleResponseLogin",value:function(e){var a=this;this.props.handleWasLogin(e),y.login((function(){a.props.history.push("/")}))}},{key:"render",value:function(){return l.a.createElement(j,{handleResponseLogin:this.handleResponseLogin})}}]),t}(l.a.Component),C=t(97),w=t(98),L=t(59),W=function(e){Object(u.a)(t,e);var a=Object(h.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).state={calon:e.calon,isStatus201:!1},n.handlePilihan=n.handlePilihan.bind(Object(c.a)(n)),n}return Object(r.a)(t,[{key:"handlePilihan",value:function(){var e=this;O.put("/pelaksanaan/vote/"+this.props.siswa._id+"/"+this.state.calon._id,{_id_calon:this.state.calon._id,_id_siswa:this.props.siswa}).then((function(a){"false"===a.data.message?e.setState({isStatus201:!0}):(alert("Terima Kasih Atas Partisipasimu!"),e.props.handleWasPilih(a.data))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,this.state.isStatus201?l.a.createElement(l.a.Fragment,null,l.a.createElement(C.a,{variant:"danger",className:"alert-home mx-auto"},"Kamu Sudah Memilih"),l.a.createElement("br",null),l.a.createElement(E.a,{variant:"secondary",onClick:this.props.handleWasPilih},"Keluar")):l.a.createElement(f.a,{className:"col-11 col-sm-11 col-lg-9 col-xl-8 mx-auto"},l.a.createElement(f.a.Img,{variant:"top",src:"http://localhost:3001/images/"+this.state.calon.gambar}),l.a.createElement(f.a.Body,null,l.a.createElement(f.a.Title,null,this.state.calon.ketua," dan ",this.state.calon.wakil),l.a.createElement(f.a.Text,null,this.state.calon.visi)),l.a.createElement(w.a,{className:"list-group-flush"},l.a.createElement(L.a,null,this.state.calon.misi_1),l.a.createElement(L.a,null,this.state.calon.misi_2),l.a.createElement(L.a,null,this.state.calon.misi_3)),l.a.createElement(f.a.Body,null,l.a.createElement(E.a,{className:"col-6 mx-auto",variant:"primary",type:"submit",onClick:this.handlePilihan},"COBLOS"))))}}]),t}(n.Component),D=t(95),x=function(e){Object(u.a)(t,e);var a=Object(h.a)(t);function t(e){return Object(o.a)(this,t),a.call(this,e)}return Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement(D.a,{bg:"light"},l.a.createElement(D.a.Brand,null,this.props.nama))}}]),t}(l.a.Component),N=function(e){Object(u.a)(t,e);var a=Object(h.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).state={calon:[]},n.handleWasPilih=n.handleWasPilih.bind(Object(c.a)(n)),n.componentDidMount=n.componentDidMount.bind(Object(c.a)(n)),n}return Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=Object(v.a)(b.a.mark((function e(){var a=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O.get("/calon").then((function(e){a.setState({calon:e.data.calon})})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"handleWasPilih",value:function(e){var a=this;this.props.handleDeleteSession(),this.setState({calon:[]}),y.logout((function(){a.props.history.push("/login")}))}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(x,{nama:"PILKETOS SMK Negeri 1 Kandeman"}),l.a.createElement("br",null),l.a.createElement(C.a,{variant:"primary",className:"alert-home"},"Selamat Datang, ",this.props.siswa.nama),l.a.createElement("br",null),l.a.createElement(f.a,{className:"col-10 col-sm-7 col-lg-5 col-xl-5 mx-auto",style:{overflow:"hidden"}},l.a.createElement(f.a.Header,{className:"mx-auto"},"Silahkan Pilih Paslon Anda"),l.a.createElement(f.a.Body,null,this.state.calon.map((function(a){return l.a.createElement(W,{key:a._id,calon:a,siswa:e.props.siswa,handleWasPilih:e.handleWasPilih})})))))}}]),t}(l.a.Component),P=function(e){Object(u.a)(t,e);var a=Object(h.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).state={siswa:{},loginStatus:!1},n.handleWasLogin=n.handleWasLogin.bind(Object(c.a)(n)),n.handleDeleteSession=n.handleDeleteSession.bind(Object(c.a)(n)),n}return Object(r.a)(t,[{key:"handleWasLogin",value:function(e){this.setState({loginStatus:!0,siswa:e.siswa})}},{key:"handleDeleteSession",value:function(){this.setState({loginStatus:!1,siswa:{}})}},{key:"render",value:function(){var e=this;return l.a.createElement(m.b,null,l.a.createElement(d.d,null,l.a.createElement(d.b,{exact:!0,path:"/login",render:function(a){return l.a.createElement(S,Object.assign({},a,{handleWasLogin:e.handleWasLogin,loginStatus:e.state.loginStatus}))}}),l.a.createElement(d.b,{exact:!0,path:"/",render:function(a){return y.isAuth()?l.a.createElement(N,Object.assign({},a,{siswa:e.state.siswa,handleDeleteSession:e.handleDeleteSession})):l.a.createElement(d.a,{to:{pathname:"/login",state:{from:a.location}}})}})))}}]),t}(l.a.Component),K=new(function(){function e(){Object(o.a)(this,e)}return Object(r.a)(e,[{key:"login",value:function(e,a){localStorage.setItem("token",JSON.stringify(e)),a()}},{key:"logout",value:function(e){localStorage.clear(),e()}},{key:"isAuth",value:function(){return localStorage.getItem("token")}}]),e}()),I=function(e){Object(u.a)(t,e);var a=Object(h.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).state={username:"",password:"",data:{}},n.handleSubmit=n.handleSubmit.bind(Object(c.a)(n)),n.handleChange=n.handleChange.bind(Object(c.a)(n)),n}return Object(r.a)(t,[{key:"handleSubmit",value:function(e){var a=this;e.preventDefault(),O.post("/pelaksanaan/admin",{username:this.state.username,password:this.state.password}).then((function(e){null===e.data.admin?alert("Tidak Ditemukan"):a.props.handleWasLogin(e.data.admin)})).catch((function(e){console.log(e)}))}},{key:"handleChange",value:function(e){var a=e.target.name,t=e.target.value;e.preventDefault(),this.setState(Object(p.a)({},a,t))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(f.a,{className:"col-8 col-sm-6 col-xl-4 mx-auto login-card-admin"},l.a.createElement(f.a.Body,null,l.a.createElement(f.a.Title,null,"LOGIN ADMIN PILKETOS"),l.a.createElement(k.a,{onSubmit:this.handleSubmit,className:" login-dialog"},l.a.createElement(k.a.Group,{controlId:"username"},l.a.createElement(k.a.Label,null,"Username"),l.a.createElement(k.a.Control,{required:!0,name:"username",type:"text",placeholder:"Username",value:this.state.username,onChange:this.handleChange})),l.a.createElement(k.a.Group,{controlId:"password"},l.a.createElement(k.a.Label,null,"Password"),l.a.createElement(k.a.Control,{required:!0,name:"password",type:"password",placeholder:"Password",value:this.state.password,onChange:this.handleChange})),l.a.createElement(E.a,{variant:"primary",type:"submit"},"Submit")))))}}]),t}(l.a.Component),_=function(e){Object(u.a)(t,e);var a=Object(h.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).handleWasLogin=n.handleWasLogin.bind(Object(c.a)(n)),n}return Object(r.a)(t,[{key:"handleWasLogin",value:function(e){var a=this;this.props.hasLogin(e),K.login(e,(function(){a.props.history.push("/admin")}))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(I,{handleWasLogin:this.handleWasLogin}))}}]),t}(l.a.Component);l.a.Component,Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(89),t(90),s.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[60,1,2]]]);
//# sourceMappingURL=main.1eed868e.chunk.js.map