(this.webpackJsonphashira=this.webpackJsonphashira||[]).push([[0],{65:function(e,a,t){e.exports=t(96)},95:function(e,a,t){},96:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),i=t(19),s=t.n(i),r=t(31),o={isLoggedIn:!1,token:null,data:{}},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SIGN_IN":return{token:null,data:a.payload,isLoggedIn:!e.isLoggedIn};case"LOGOUT":return{isLoggedIn:!1,token:null,data:{}};default:return e.isLoggedIn}},u=t(62),h=t(5),m=t(6),d=t(10),p=t(9),g=t(21),b=t(8),f=t(7),v=t(32),E=t(24),k=t.n(E),O=t(33),j=t(101),y=t(99),S=t(98),C=t(56).create({baseURL:"https://piketosservernodejs.herokuapp.com/api/"}),w=(t(63),l.a.createContext(),function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(h.a)(this,t),(n=a.call(this,e)).state={siswa:[],kelas:[],kelasClicked:"",siswaClicked:"",nis:"",isKelasClicked:!1},n.handleChange=n.handleChange.bind(Object(f.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(f.a)(n)),n.componentDidMount=n.componentDidMount.bind(Object(f.a)(n)),n.handleKelasClicked=n.handleKelasClicked.bind(Object(f.a)(n)),n}return Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(O.a)(k.a.mark((function e(){var a=this;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C.get("/kelas").then((function(e){a.setState({kelas:e.data.Kelas})})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"handleKelasClicked",value:function(e){var a=this;this.setState({kelasClicked:e.target.value}),console.log(e.target.value),C.get("/siswa/kelas/"+e.target.value).then((function(e){a.setState({siswa:e.data.siswa,isKelasClicked:!0})})).catch((function(e){console.log(e)}))}},{key:"handleChange",value:function(e){e.preventDefault();var a=e.target,t=a.name,n=a.value;this.setState(Object(v.a)({},t,n))}},{key:"handleSubmit",value:function(e){var a=this;e.preventDefault(),C.post("/pelaksanaan/login",{nama:e.target.nama.value,nis:e.target.nis.value}).then((function(e){null!=e.data.siswa&&a.props.handleResponseLogin(e.data)})).catch((function(e){console.log(e)})),this.setState({kelasClicked:"",siswaClicked:""})}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(j.a,{className:"col-8 col-sm-6 col-xl-4 mx-auto login-card"},l.a.createElement(j.a.Body,null,l.a.createElement(j.a.Title,null,"PILKETOS ",(new Date).getFullYear()),l.a.createElement(y.a,{onSubmit:this.handleSubmit,className:" login-dialog"},l.a.createElement(y.a.Group,{controlId:"kelas"},l.a.createElement(y.a.Label,null,"Kelas"),l.a.createElement(y.a.Control,{required:!0,as:"select",value:this.state.kelasClicked,onChange:this.handleKelasClicked,onClick:this.handleKelasClicked},this.state.kelas.map((function(e){return l.a.createElement("option",{key:e._id},e.nama)})))),this.state.isKelasClicked?l.a.createElement(y.a.Group,{controlId:"nama"},l.a.createElement(y.a.Label,null,"Nama Lengkap"),l.a.createElement(y.a.Control,{as:"select",required:!0,name:"siswaClicked",value:this.state.siswaClicked,onChange:this.handleChange},this.state.siswa.map((function(e){return l.a.createElement("option",{key:e._id},e.nama)})))):null,l.a.createElement(y.a.Group,{controlId:"nis"},l.a.createElement(y.a.Label,null,"Nomor NIS"),l.a.createElement(y.a.Control,{name:"nis",type:"number",placeholder:"NIS",value:this.state.nis,onChange:this.handleChange})),l.a.createElement(S.a,{variant:"primary",type:"submit"},"Submit")))))}}]),t}(l.a.Component)),L=new(function(){function e(){Object(h.a)(this,e),this.auth=!1}return Object(m.a)(e,[{key:"login",value:function(e){this.auth=!0,e()}},{key:"logout",value:function(e){this.auth=!1,e()}},{key:"isAuth",value:function(){return this.auth}}]),e}()),N=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(h.a)(this,t),(n=a.call(this,e)).handleResponseLogin=n.handleResponseLogin.bind(Object(f.a)(n)),n}return Object(m.a)(t,[{key:"handleResponseLogin",value:function(e){var a=this;this.props.handleWasLogin(e),L.login((function(){a.props.history.push("/")}))}},{key:"render",value:function(){return l.a.createElement(w,{handleResponseLogin:this.handleResponseLogin})}}]),t}(l.a.Component),I=t(102),x=t(103),D=t(64),P=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(h.a)(this,t),(n=a.call(this,e)).state={calon:e.calon,isStatus201:!1},n.handlePilihan=n.handlePilihan.bind(Object(f.a)(n)),n}return Object(m.a)(t,[{key:"handlePilihan",value:function(){var e=this;C.put("/pelaksanaan/vote/"+this.props.siswa._id+"/"+this.state.calon._id,{_id_calon:this.state.calon._id,_id_siswa:this.props.siswa}).then((function(a){"false"===a.data.message?e.setState({isStatus201:!0}):(alert("Terima Kasih Atas Partisipasimu!"),e.props.handleWasPilih(a.data))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,this.state.isStatus201?l.a.createElement(l.a.Fragment,null,l.a.createElement(I.a,{variant:"danger",className:"alert-home mx-auto"},"Kamu Sudah Memilih"),l.a.createElement("br",null),l.a.createElement(S.a,{variant:"secondary",onClick:this.props.handleWasPilih},"Keluar")):l.a.createElement(j.a,{className:"col-11 col-sm-11 col-lg-9 col-xl-8 mx-auto"},l.a.createElement(j.a.Img,{variant:"top",src:"http://localhost:3001/images/"+this.state.calon.gambar}),l.a.createElement(j.a.Body,null,l.a.createElement(j.a.Title,null,this.state.calon.ketua," dan ",this.state.calon.wakil),l.a.createElement(j.a.Text,null,this.state.calon.visi)),l.a.createElement(x.a,{className:"list-group-flush"},l.a.createElement(D.a,null,this.state.calon.misi_1),l.a.createElement(D.a,null,this.state.calon.misi_2),l.a.createElement(D.a,null,this.state.calon.misi_3)),l.a.createElement(j.a.Body,null,l.a.createElement(S.a,{className:"col-6 mx-auto",variant:"primary",type:"submit",onClick:this.handlePilihan},"COBLOS"))))}}]),t}(n.Component),W=t(100),K=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(e){return Object(h.a)(this,t),a.call(this,e)}return Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement(W.a,{bg:"light"},l.a.createElement(W.a.Brand,null,this.props.nama))}}]),t}(l.a.Component),_=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(h.a)(this,t),(n=a.call(this,e)).state={calon:[]},n.handleWasPilih=n.handleWasPilih.bind(Object(f.a)(n)),n.componentDidMount=n.componentDidMount.bind(Object(f.a)(n)),n}return Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(O.a)(k.a.mark((function e(){var a=this;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C.get("/calon").then((function(e){a.setState({calon:e.data.calon})})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"handleWasPilih",value:function(e){var a=this;this.props.handleDeleteSession(),this.setState({calon:[]}),L.logout((function(){a.props.history.push("/login")}))}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(K,{nama:"PILKETOS SMK Negeri 1 Kandeman"}),l.a.createElement("br",null),l.a.createElement(I.a,{variant:"primary",className:"alert-home"},"Selamat Datang, ",this.props.siswa.nama),l.a.createElement("br",null),l.a.createElement(j.a,{className:"col-10 col-sm-7 col-lg-5 col-xl-5 mx-auto",style:{overflow:"hidden"}},l.a.createElement(j.a.Header,{className:"mx-auto"},"Silahkan Pilih Paslon Anda"),l.a.createElement(j.a.Body,null,this.state.calon.map((function(a){return l.a.createElement(P,{key:a._id,calon:a,siswa:e.props.siswa,handleWasPilih:e.handleWasPilih})})))))}}]),t}(l.a.Component),T=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(h.a)(this,t),(n=a.call(this,e)).state={siswa:{},loginStatus:!1},n.handleWasLogin=n.handleWasLogin.bind(Object(f.a)(n)),n.handleDeleteSession=n.handleDeleteSession.bind(Object(f.a)(n)),n}return Object(m.a)(t,[{key:"handleWasLogin",value:function(e){this.setState({loginStatus:!0,siswa:e.siswa})}},{key:"handleDeleteSession",value:function(){this.setState({loginStatus:!1,siswa:{}})}},{key:"render",value:function(){var e=this;return l.a.createElement(g.a,null,l.a.createElement(b.d,null,l.a.createElement(b.b,{exact:!0,path:"/login",render:function(a){return l.a.createElement(N,Object.assign({},a,{handleWasLogin:e.handleWasLogin,loginStatus:e.state.loginStatus}))}}),l.a.createElement(b.b,{exact:!0,path:"/",render:function(a){return L.isAuth()?l.a.createElement(_,Object.assign({},a,{siswa:e.state.siswa,handleDeleteSession:e.handleDeleteSession})):l.a.createElement(b.a,{to:{pathname:"/login",state:{from:a.location}}})}})))}}]),t}(l.a.Component),M=new(function(){function e(){Object(h.a)(this,e)}return Object(m.a)(e,[{key:"login",value:function(e,a){localStorage.setItem("token",JSON.stringify(e)),a()}},{key:"logout",value:function(e){localStorage.clear(),e()}},{key:"isAuth",value:function(){return localStorage.getItem("token")}}]),e}()),A=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(h.a)(this,t),(n=a.call(this,e)).state={username:"",password:"",data:{}},n.handleSubmit=n.handleSubmit.bind(Object(f.a)(n)),n.handleChange=n.handleChange.bind(Object(f.a)(n)),n}return Object(m.a)(t,[{key:"handleSubmit",value:function(e){var a=this;e.preventDefault(),C.post("/pelaksanaan/admin",{username:this.state.username,password:this.state.password}).then((function(e){null===e.data.admin?alert("Tidak Ditemukan"):a.props.handleWasLogin(e.data.admin)})).catch((function(e){console.log(e)}))}},{key:"handleChange",value:function(e){var a=e.target.name,t=e.target.value;e.preventDefault(),this.setState(Object(v.a)({},a,t))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(j.a,{className:"col-8 col-sm-6 col-xl-4 mx-auto login-card-admin"},l.a.createElement(j.a.Body,null,l.a.createElement(j.a.Title,null,"LOGIN ADMIN PILKETOS"),l.a.createElement(y.a,{onSubmit:this.handleSubmit,className:" login-dialog"},l.a.createElement(y.a.Group,{controlId:"username"},l.a.createElement(y.a.Label,null,"Username"),l.a.createElement(y.a.Control,{required:!0,name:"username",type:"text",placeholder:"Username",value:this.state.username,onChange:this.handleChange})),l.a.createElement(y.a.Group,{controlId:"password"},l.a.createElement(y.a.Label,null,"Password"),l.a.createElement(y.a.Control,{required:!0,name:"password",type:"password",placeholder:"Password",value:this.state.password,onChange:this.handleChange})),l.a.createElement(S.a,{variant:"primary",type:"submit"},"Submit")))))}}]),t}(l.a.Component),B=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(h.a)(this,t),(n=a.call(this,e)).handleWasLogin=n.handleWasLogin.bind(Object(f.a)(n)),n}return Object(m.a)(t,[{key:"handleWasLogin",value:function(e){var a=this;this.props.hasLogin(e),M.login(e,(function(){a.props.history.push("/admin")}))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(A,{handleWasLogin:this.handleWasLogin}))}}]),t}(l.a.Component),F=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(h.a)(this,t),(n=a.call(this,e)).state={data:{}},n.hasLogin=n.hasLogin.bind(Object(f.a)(n)),n}return Object(m.a)(t,[{key:"hasLogin",value:function(e){this.setState({data:e})}},{key:"render",value:function(){var e=this;return l.a.createElement(g.a,null,l.a.createElement(b.d,null,l.a.createElement(b.b,{exact:!0,path:"/admin/login",render:function(a){return l.a.createElement(B,Object.assign({},a,{hasLogin:e.hasLogin}))}}),l.a.createElement(b.b,{exact:!0,path:"/admin",render:function(e){return M.isAuth()?l.a.createElement("h1",null,"ADMIN"):l.a.createElement(b.a,{to:{pathname:"/admin/login",state:{from:e.location}}})}}),l.a.createElement(b.b,{path:"*",render:function(e){return l.a.createElement("h1",{className:"text-center mx-auto"},"404 NOT FOUND")}})))}}]),t}(l.a.Component),G=function(e){Object(d.a)(t,e);var a=Object(p.a)(t);function t(){return Object(h.a)(this,t),a.apply(this,arguments)}return Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement(g.a,null,l.a.createElement(b.b,{path:"/"},l.a.createElement(T,null)),l.a.createElement(b.b,{path:"/admin"},l.a.createElement(F,null)))}}]),t}(l.a.Component);t(94),t(95);var R=Object(r.b)(c);s.a.render(l.a.createElement(u.a,{store:R},l.a.createElement(G,null)),document.getElementById("root"))}},[[65,1,2]]]);
//# sourceMappingURL=main.fd370cf7.chunk.js.map